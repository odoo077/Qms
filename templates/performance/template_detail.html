{# templates/performance/template_detail.html #}
{% extends "base.html" %}
{% load static %}

{% block title %}Template · {{ object.name }} · 360 Manager{% endblock %}
{% block page_title %}Evaluation Template Details{% endblock %}

{% block page_actions %}
  <a href="{% url 'performance:template_list' %}" class="btn btn-sm btn-ghost">← Back to list</a>
  {% if object.id in template_change_ids %}
    <a href="{% url 'performance:template_edit' object.id %}" class="btn btn-sm btn-primary">Edit</a>
  {% endif %}
{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto px-4 py-8 space-y-8">

  <!-- Summary -->
  <div class="card bg-base-100 border border-base-300 shadow-xl">
    <div class="card-body grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <div class="text-base-content/60">Template Name</div>
        <div class="font-medium">{{ object.name }}</div>
      </div>
      <div>
        <div class="text-base-content/60">Company</div>
        <div class="font-medium">{{ object.company|default:"—" }}</div>
      </div>
      {% if object.description %}
      <div class="md:col-span-2">
        <div class="text-base-content/60 mb-1">Description</div>
        <p class="text-sm text-base-content/70 whitespace-pre-wrap">{{ object.description }}</p>
      </div>
      {% endif %}
    </div>
  </div>

  <!-- Parameters -->
  <div class="rounded-2xl bg-base-100 ring-1 ring-base-300 shadow-lg p-6">
    <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-primary" fill="none"
           viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6l4 2" />
      </svg>
      Evaluation Parameters
    </h3>

    {% if object.parameters.exists %}
      <div class="overflow-x-auto">
        <table class="table table-sm table-zebra w-full">
          <thead>
            <tr class="bg-base-200">
              <th>#</th>
              <th>Name</th>
              <th>Weight</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            {% for param in object.parameters.all %}
              <tr>
                <td>{{ forloop.counter }}</td>
                <td class="font-medium">{{ param.name }}</td>
                <td>{{ param.weight|default:"—" }}</td>
                <td class="text-sm text-base-content/70">{{ param.description|default:"—" }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <div class="text-sm text-base-content/60">No parameters linked to this template.</div>
    {% endif %}
  </div>

  <!-- Actions -->
  <div class="flex justify-end gap-3 mt-6">
    <a href="{% url 'performance:template_list' %}" class="btn btn-ghost">Back</a>
    {% if object.id in template_change_ids %}
      <a href="{% url 'performance:template_edit' object.id %}" class="btn btn-primary">Edit</a>
    {% endif %}
  </div>

</div>
{% endblock %}
