{% extends "base.html" %}
{% load widget_tweaks %}

{% block title %}Change password Â· 360 Manager{% endblock %}

{% block page_title %}Profile{% endblock %}
{% block header_title %}Change password{% endblock %}
{% block header_subtitle %}
Update your password to keep your account secure.
{% endblock %}

{% block content %}
<!-- Center wrapper -->
<div class="flex justify-center">
  <div class="w-full max-w-2xl">

    <div class="card bg-base-100 shadow-sm">
      <div class="card-body">

        {% if form.non_field_errors %}
          <div class="alert alert-error text-sm mb-4">
            {% for err in form.non_field_errors %}
              <span>{{ err }}</span>
            {% endfor %}
          </div>
        {% endif %}

        <form method="post" class="space-y-4" novalidate>
          {% csrf_token %}

          <!-- Current password -->
          <div class="form-control">
            <label class="label">
              <span class="label-text">Current password</span>
            </label>
            {% render_field form.old_password class="input input-bordered w-full" %}
            {% if form.old_password.errors %}
              <p class="mt-1 text-xs text-error">
                {{ form.old_password.errors|join:", " }}
              </p>
            {% endif %}
          </div>

          <!-- New password -->
          <div class="form-control">
            <label class="label">
              <span class="label-text">New password</span>
            </label>
            {% render_field form.new_password1 class="input input-bordered w-full" %}
            {% if form.new_password1.help_text %}
              <div class="mt-2 text-xs text-base-content/60 prose-ul:my-1">
                {{ form.new_password1.help_text|safe }}
              </div>
            {% endif %}
            {% if form.new_password1.errors %}
              <p class="mt-1 text-xs text-error">
                {{ form.new_password1.errors|join:", " }}
              </p>
            {% endif %}
          </div>

          <!-- Confirm new password -->
          <div class="form-control">
            <label class="label">
              <span class="label-text">Confirm new password</span>
            </label>
            {% render_field form.new_password2 class="input input-bordered w-full" %}
            {% if form.new_password2.errors %}
              <p class="mt-1 text-xs text-error">
                {{ form.new_password2.errors|join:", " }}
              </p>
            {% endif %}
          </div>

          <!-- Actions -->
          <div class="pt-4 flex gap-2">
            <button type="submit" class="btn btn-primary">
              Change password
            </button>
            <a href="{% url 'base:profile' %}" class="btn btn-outline">
              Cancel
            </a>
          </div>
        </form>

      </div>
    </div>

    <p class="mt-4 text-sm text-base-content/60 text-center">
      Forgot your password?
      <a href="{% url 'base:password_reset' %}" class="link link-hover">
        Reset it here
      </a>.
    </p>

  </div>
</div>
{% endblock %}
