{% extends "base/users/auth_base.html" %}
{% load widget_tweaks %}

{% block title %}Register{% endblock %}

{% block content %}
<div class="card bg-base-100 shadow-xl rounded-2xl">
  <div class="card-body space-y-6">

    <!-- Header -->
    <div class="text-center space-y-1">
      <h1 class="text-2xl font-semibold">Create your account</h1>
      <p class="text-sm text-base-content/60">
        Fill in the details below to get started
      </p>
    </div>

    <!-- Non-field errors -->
    {% if form.non_field_errors %}
      <div class="alert alert-error text-sm">
        {% for error in form.non_field_errors %}
          <span>{{ error }}</span>
        {% endfor %}
      </div>
    {% endif %}

    <!-- Form -->
    <form method="post" class="space-y-4">
      {% csrf_token %}

      <!-- Email -->
      <div class="form-control">
        <label class="label">
          <span class="label-text">Email address</span>
        </label>
        {% render_field form.email class="input input-bordered w-full" %}
      </div>

      <!-- Username -->
      <div class="form-control">
        <label class="label">
          <span class="label-text">Username</span>
        </label>
        {% render_field form.username class="input input-bordered w-full" %}
      </div>

      <!-- First / Last name -->
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div class="form-control">
          <label class="label">
            <span class="label-text">First name</span>
          </label>
          {% render_field form.first_name class="input input-bordered w-full" %}
        </div>

        <div class="form-control">
          <label class="label">
            <span class="label-text">Last name</span>
          </label>
          {% render_field form.last_name class="input input-bordered w-full" %}
        </div>
      </div>

      <!-- Password -->
      <div class="form-control">
        <label class="label">
          <span class="label-text">Password</span>
        </label>
        {% render_field form.password1 class="input input-bordered w-full" %}
      </div>

      <!-- Confirm password -->
      <div class="form-control">
        <label class="label">
          <span class="label-text">Confirm password</span>
        </label>
        {% render_field form.password2 class="input input-bordered w-full" %}
      </div>

      {# ===================================================== #}
      {# Terms & Privacy Agreement                             #}
      {# ===================================================== #}
      <label class="flex items-start gap-3 text-sm">

        <input
          type="checkbox"
          name="accept_terms"
          class="checkbox checkbox-sm mt-1"
          required
          aria-required="true"
        />

        <span class="leading-relaxed">
          I agree to the
          <a href="{% url 'base:terms' %}"
             target="_blank"
             rel="noopener noreferrer"
             class="link link-primary font-medium">
            Terms of Service
          </a>
          and
          <a href="{% url 'base:privacy' %}"
             target="_blank"
             rel="noopener noreferrer"
             class="link link-primary font-medium">
            Privacy Policy
          </a>.
        </span>

      </label>


      <!-- Submit -->
      <button type="submit" class="btn btn-primary w-full mt-2">
        Create account
      </button>

      <!-- Login -->
      <p class="text-center text-sm text-base-content/70">
        Already have an account?
        <a href="{% url 'base:login' %}" class="link link-primary font-medium">
          Sign in
        </a>
      </p>
    </form>

  </div>
</div>
{% endblock %}
