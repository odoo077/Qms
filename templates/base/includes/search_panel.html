{# templates/base/includes/search_panel.html #}
<form method="get" class="grid gap-3 mb-6">

  <!-- Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„: Ø§Ù„Ø¨Ø­Ø« + Ø§Ù„Ø´Ø±ÙƒØ© + Ø§Ù„Ù…Ø¯Ù‰ Ø§Ù„Ø³Ø±ÙŠØ¹ -->
  <div class="grid gap-3 sm:grid-cols-3">
    <!-- ðŸ” Ù†Øµ Ø§Ù„Ø¨Ø­Ø« -->
    <div>
      <label class="label-text text-sm">Search</label>
      <input type="text" name="q" value="{{ request.GET.q|default_if_none:'' }}"
             placeholder="Search by name, email, phoneâ€¦"
             class="input input-bordered input-sm w-full" />
    </div>

    <!-- ðŸ¢ Ø§Ù„Ø´Ø±ÙƒØ© (Ø¥Ù† ØªÙˆÙØ±Øª Ù…Ù† Ø§Ù„Ù€context_processor) -->
    <div>
      <label class="label-text text-sm">Company</label>
      <select name="company" class="select select-bordered select-sm w-full">
        <option value="">All allowed</option>
        {% for c in allowed_companies %}
          <option value="{{ c.id }}" {% if request.GET.company == c.id|stringformat:"s" %}selected{% endif %}>
            {{ c.name }}
          </option>
        {% endfor %}
      </select>
    </div>

    <!-- â±ï¸ Quick range -->
    <div>
      <label class="label-text text-sm">Quick range</label>
      <select name="range" class="select select-bordered select-sm w-full">
        <option value="">â€”</option>
        <option value="today"  {% if request.GET.range == 'today' %}selected{% endif %}>Today</option>
        <option value="week"   {% if request.GET.range == 'week' %}selected{% endif %}>This week</option>
        <option value="month"  {% if request.GET.range == 'month' %}selected{% endif %}>This month</option>
        <option value="year"   {% if request.GET.range == 'year' %}selected{% endif %}>This year</option>
      </select>
    </div>
  </div>

  <!-- Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ: ÙÙ„Ø§ØªØ± Ù…ØªÙ‚Ø¯Ù…Ø© -->
  <div class="collapse bg-base-100 border border-base-300">
    <input type="checkbox" />
    <div class="collapse-title text-sm font-medium">
      Advanced filters
    </div>
    <div class="collapse-content grid gap-3 sm:grid-cols-3">

      <!-- âœ… Ø§Ù„Ø­Ø§Ù„Ø© (Active) Ø¹Ø§Ù…Ù‘Ø© Ù„ÙƒÙ„ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… -->
      <div>
        <label class="label-text text-sm">Status</label>
        <select name="active" class="select select-bordered select-sm w-full">
          <option value="">All</option>
          <option value="1" {% if request.GET.active == '1' %}selected{% endif %}>Active</option>
          <option value="0" {% if request.GET.active == '0' %}selected{% endif %}>Inactive</option>
        </select>
      </div>

      <!-- ðŸ‘¥ Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±ÙŠÙƒ (Partner ÙÙ‚Ø·) -->
      {% if list_model == 'partner' %}
      <div>
        <label class="label-text text-sm">Kind</label>
        <select name="kind" class="select select-bordered select-sm w-full">
          <option value="">All</option>
          <option value="company" {% if request.GET.kind == 'company' %}selected{% endif %}>Company</option>
          <option value="person"  {% if request.GET.kind == 'person' %}selected{% endif %}>Person</option>
        </select>
      </div>
      {% endif %}

      <!-- ðŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ® Ù…Ù†/Ø¥Ù„Ù‰ -->
      <div>
        <label class="label-text text-sm">Date from</label>
        <input type="date" name="date_from" value="{{ request.GET.date_from }}" class="input input-bordered input-sm w-full"/>
      </div>
      <div>
        <label class="label-text text-sm">Date to</label>
        <input type="date" name="date_to" value="{{ request.GET.date_to }}" class="input input-bordered input-sm w-full"/>
      </div>

    </div>
  </div>

  <!-- Ø§Ù„Ø£Ø²Ø±Ø§Ø± -->
  <div class="flex gap-2 mt-2">
    <button class="btn btn-primary btn-sm" type="submit">Apply</button>
    {% if request.GET %}<a href="{{ request.path }}" class="btn btn-ghost btn-sm">Reset</a>{% endif %}
  </div>
</form>
