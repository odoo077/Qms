{% extends "base.html" %}

{% block title %}
Job · {{ object.name }}
{% endblock %}

{% block content %}
<div class="w-full px-6 py-6 space-y-6">

  <section class="flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
    <div>
      <h1 class="text-3xl font-semibold tracking-tight">
        {{ object.name }}
      </h1>
      <p class="text-sm text-base-content/60">
        {{ object.employee_count }} employees assigned to this job
      </p>
    </div>

    <div class="flex items-center gap-2">
      <a href="{% url 'hr:job_list' %}"
         class="btn btn-ghost btn-sm">
        Back
      </a>
      <a href="{% url 'hr:job_edit' object.pk %}"
         class="btn btn-outline btn-sm">
        Edit Job
      </a>
    </div>
  </section>

  <section class="card bg-base-100 border border-base-200 shadow-sm">
    <div class="card-body p-6 space-y-6">

      <h2 class="text-sm font-semibold text-base-content/70">
        Job Overview
      </h2>

      <dl class="grid grid-cols-1 md:grid-cols-3 gap-x-8 gap-y-4 text-sm">

        <div class="text-base-content/60">Job Title</div>
        <div class="font-medium md:col-span-2">
          {{ object.name }}
        </div>

        <div class="text-base-content/60">Company</div>
        <div class="md:col-span-2">
          {{ object.company|default:"—" }}
        </div>

        <div class="text-base-content/60">Department</div>
        <div class="md:col-span-2">
          {{ object.department|default:"—" }}
        </div>

        <div class="text-base-content/60">Contract Type</div>
        <div class="md:col-span-2">
          {{ object.contract_type|default:"—" }}
        </div>

        <div class="text-base-content/60">Planned Recruitment</div>
        <div class="md:col-span-2">
          {{ object.no_of_recruitment|default:"0" }}
        </div>

        <div class="text-base-content/60">Status</div>
        <div class="md:col-span-2">
          {% if object.active %}
            <span class="text-success font-medium">
              Active
            </span>
          {% else %}
            <span class="text-base-content/40">
              Archived
            </span>
          {% endif %}
        </div>

      </dl>

    </div>
  </section>

  <section class="card bg-base-100 border border-base-200 shadow-sm">
    <div class="card-body p-6 space-y-4">

      <h2 class="text-sm font-semibold text-base-content/70">
        Assigned Employees
      </h2>

      {% if employees %}
        <div class="overflow-x-auto">
          <table class="table w-full text-sm">
            <thead class="bg-base-200/60">
              <tr>
                <th>Name</th>
                <th>Department</th>
                <th>Manager</th>
                <th class="text-right w-32">Actions</th>
              </tr>
            </thead>

            <tbody class="[&>tr]:border-base-200">
              {% for emp in employees %}
              <tr class="hover">

                <td class="font-medium">
                  {{ emp.name }}
                </td>

                <td class="text-base-content/70">
                  {{ emp.department|default:"—" }}
                </td>

                <td class="text-base-content/70">
                  {{ emp.manager|default:"—" }}
                </td>

                <td class="text-right">
                  <a href="{% url 'hr:employee_change_job' emp.pk %}"
                     class="btn btn-outline btn-xs">
                    Change Job
                  </a>
                </td>

              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      {% else %}
        <p class="text-sm text-base-content/60">
          No employees are currently assigned to this job
        </p>
      {% endif %}

    </div>
  </section>

</div>
{% endblock %}
