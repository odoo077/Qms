{% extends "base.html" %}

{% block title %}Departments{% endblock %}
{% block page_title %}Departments{% endblock %}

{% block page_actions %}
  {% if can_add %}
    <a href="{% url 'hr:department_create' %}" class="btn btn-primary btn-sm">
      + New Department
    </a>
  {% endif %}
{% endblock %}

{% block content %}

<div class="space-y-8">

  {% for company, tree in departments_by_company.items %}

    <div class="card bg-base-100 shadow-sm">
      <div class="card-body">

        <h2 class="text-xl font-semibold mb-6">
          {{ company.name }}
        </h2>

        {% if tree %}
          <div class="space-y-4">
            {% for node in tree %}
              {% include "hr/partials/department_card.html" with node=node %}
            {% endfor %}
          </div>
        {% else %}
          <p class="opacity-60 text-sm">No departments found.</p>
        {% endif %}

      </div>
    </div>

  {% endfor %}

</div>

{% endblock %}
