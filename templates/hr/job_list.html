{# templates/hr/job_list.html  (REPLACE بالكامل) #}
{% extends "base.html" %}

{% block title %}Jobs{% endblock %}
{% block page_title %}Jobs{% endblock %}

{% block page_actions %}
  {% if can_add %}
    <a href="{% url 'hr:job_create' %}" class="btn btn-primary btn-sm">+ New Job</a>
  {% endif %}
{% endblock %}

{% block content %}

<div class="card bg-base-100 shadow-sm">
  <div class="card-body p-0 overflow-x-auto">

    <table class="table table-zebra w-full">
      <thead>
        <tr>
          <th>Job</th>
          <th>Company</th>
          <th>Department</th>
          <th class="text-center">Employees</th>
          <th class="text-center">Vacancies</th>
          <th class="text-right">Actions</th>
        </tr>
      </thead>

      <tbody>
        {% for job in object_list %}
          <tr>
            <td class="font-medium">{{ job.name }}</td>
            <td>{{ job.company }}</td>
            <td>{{ job.department|default:"—" }}</td>
            <td class="text-center">
              <span class="badge badge-ghost badge-sm">{{ job.employees_count|default:0 }}</span>
            </td>
            <td class="text-center">
              {% if job.vacancies|default:0 > 0 %}
                <span class="badge badge-success badge-sm">{{ job.vacancies }}</span>
              {% else %}
                <span class="badge badge-ghost badge-sm">0</span>
              {% endif %}
            </td>
            <td class="text-right">
              <div class="flex justify-end gap-2">
                <a href="{% url 'hr:job_detail' job.pk %}" class="btn btn-xs btn-outline">View</a>
                <a href="{% url 'hr:job_edit' job.pk %}" class="btn btn-xs btn-ghost">Edit</a>
              </div>
            </td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="6" class="text-center py-10 opacity-60">No jobs found.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

  </div>
</div>

{% endblock %}
