{% load static %}
<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-transitions" data-theme="{{ request.COOKIES.theme|default:'corporate' }}">
<head>
  <meta charset="utf-8" />
  <title>{% block title %}360 Manager{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />

  {# ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ… Ø¨Ø£Ø³Ø±Ø¹ ÙˆÙ‚Øª Ù‚Ø¨Ù„ Ø±Ø³Ù… Ø§Ù„ØµÙØ­Ø© Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ÙˆÙ…ÙŠØ¶ #}
   <script>
    (function () {
      const html = document.documentElement;
      const t =
        document.cookie.match(/(?:^|; )theme=([^;]+)/)?.[1]
        || localStorage.getItem("theme")
        || html.getAttribute("data-theme")
        || "corporate";

      html.setAttribute("data-theme", decodeURIComponent(t));
    })();
  </script>


  <link href="{% static 'css/dist/styles.css' %}" rel="stylesheet" />
  <link rel="icon" href="{% static 'images/favicon.ico' %}" />

  <style>
    .no-transitions *,
    .no-transitions *::before,
    .no-transitions *::after {
      transition: none !important;
      animation: none !important;
    }
    body {
      min-height: 100vh;
    }
  </style>

  {% block head_extra %}{% endblock %}
</head>
<body class="min-h-screen bg-base-200 text-base-content selection:bg-primary/20 selection:text-primary"
      data-theme="{{ request.COOKIES.theme|default:'corporate' }}">

<div class="min-h-screen flex flex-col">

  {# NAVBAR Ø¨Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø§Ø´Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ #}
  <header class="navbar bg-base-100/80 backdrop-blur border-b border-base-200 sticky top-0 z-40 px-3 sm:px-4">
    <div class="flex w-full items-center justify-between gap-2">

      {# ÙŠØ³Ø§Ø± Ø§Ù„Ù€ Navbar: Ø§Ù„Ø´Ø¹Ø§Ø± + Ø´Ø±ÙŠØ· Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª #}
      <div class="flex items-center gap-3">
        {# Ø§Ù„Ø´Ø¹Ø§Ø± #}
<a href="{% url 'base:home' %}"
   class="no-underline hover:no-underline focus:no-underline
          hover:bg-transparent active:bg-transparent
          focus:bg-transparent
          px-2 py-1 select-none">

  <span class="text-[24px] font-extrabold tracking-tight">
    <span class="text-primary">
      360
    </span>
    <span class="text-base-content font-semibold">
      Manager
    </span>
  </span>

</a>




        {# Ø´Ø±ÙŠØ· Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª (Ù‚ÙˆØ§Ø¦Ù… Ù…Ù†Ø³Ø¯Ù„Ø©) â€“ ÙŠØ¸Ù‡Ø± Ù…Ù† md ÙØ£Ø¹Ù„Ù‰ #}
        {% with ns=request.resolver_match.namespace|default:'' %}
        <nav class="hidden md:flex items-center gap-1 ml-1">
<!-- Base -->
<div class="dropdown dropdown-hover">
  <label
    tabindex="0"
    class="btn btn-ghost btn-sm
           {% if ns == '' or ns == 'base' %}btn-active font-semibold{% endif %}"
  >
    <!-- Main icon -->
    <svg xmlns="http://www.w3.org/2000/svg"
         class="h-4 w-4 mr-1"
         fill="none"
         viewBox="0 0 24 24"
         stroke="currentColor">
      <path stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16" />
    </svg>
    Base
  </label>

  <ul
    tabindex="0"
    class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-64 text-sm"
  >

    <!-- ================= Core Records ================= -->
    <li class="menu-title opacity-60">
      <span class="flex items-center gap-2">
        ğŸ§© Core Records
      </span>
    </li>

    <li>
      <a href="{% url 'base:company_list' %}">
        ğŸ¢ Companies
      </a>
    </li>

    <li>
      <a href="{% url 'base:partner_list' %}">
        ğŸ¤ Partners
      </a>
    </li>

    <li class="divider my-1"></li>

    <!-- ================= Access Management ================= -->
    <li class="menu-title opacity-60">
      <span class="flex items-center gap-2">
        ğŸ” Access Management
      </span>
    </li>

    <li>
      <a href="{% url 'base:user_list' %}">
        ğŸ‘¤ Users
      </a>
    </li>

  </ul>
</div>


<!-- Assets -->
<div class="dropdown dropdown-hover">
  <label
    tabindex="0"
    class="btn btn-ghost btn-sm
           {% if ns == 'assets' %}btn-active font-semibold{% endif %}"
  >
    <!-- Main icon -->
    <svg xmlns="http://www.w3.org/2000/svg"
         class="h-4 w-4 mr-1"
         fill="none"
         viewBox="0 0 24 24"
         stroke="currentColor">
      <path stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M3 7h18M5 7v10a2 2 0 002 2h10a2 2 0 002-2V7M9 11h6" />
    </svg>
    Assets
  </label>

  <ul
    tabindex="0"
    class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-64 text-sm"
  >

    <!-- ================= Master Data ================= -->
    <li class="menu-title opacity-60">
      <span class="flex items-center gap-2">
        ğŸ“ Master Data
      </span>
    </li>

    <li>
      <a href="{% url 'assets:category_list' %}">
        ğŸ—‚ Asset Categories
      </a>
    </li>

    <li class="divider my-1"></li>

    <!-- ================= Operations ================= -->
    <li class="menu-title opacity-60">
      <span class="flex items-center gap-2">
        ğŸ”„ Operations
      </span>
    </li>

    <li>
      <a href="{% url 'assets:asset_list' %}">
        ğŸ’¼ Assets Registry
      </a>
    </li>

    <li>
      <a href="{% url 'assets:assignment_list' %}">
        ğŸ‘¤ Asset Assignments
      </a>
    </li>

  </ul>
</div>


<!-- ================= HR ================= -->
<div class="dropdown dropdown-hover">
  <label
    tabindex="0"
    class="btn btn-ghost btn-sm
           {% if ns == 'hr' %}btn-active font-semibold{% endif %}"
  >
    <svg xmlns="http://www.w3.org/2000/svg"
         class="h-4 w-4 mr-1"
         fill="none"
         viewBox="0 0 24 24"
         stroke="currentColor">
      <path stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M17 20h5v-2a4 4 0 00-4-4h-1M9 20H4v-2a4 4 0 014-4h1m4-4a4 4 0 100-8 4 4 0 000 8zm6 4a3 3 0 100-6 3 3 0 000 6z" />
    </svg>
    HR
  </label>

  <ul
    tabindex="0"
    class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-72 text-sm"
  >

    <!-- ================= People ================= -->
    <li class="menu-title opacity-60">
      <span>ğŸ‘¥ People</span>
    </li>

    <li>
      <a href="{% url 'hr:employee_list' %}">
        ğŸ‘¤ Employee Directory
      </a>
    </li>

    <li class="divider my-1"></li>

    <!-- ================= Organization ================= -->
    <li class="menu-title opacity-60">
      <span>ğŸ¢ Organization</span>
    </li>

    <li>
      <a href="{% url 'hr:department_list' %}">
        ğŸ—‚ Departments
      </a>
    </li>

    <li>
      <a href="{% url 'hr:job_list' %}">
        ğŸ§¾ Jobs
      </a>
    </li>

    <li class="divider my-1"></li>

    <!-- ================= Career & Development ================= -->
    <li class="menu-title opacity-60">
      <span>ğŸ§­ Career & Development</span>
    </li>

    <li>
      <a href="{% url 'hr:jobcareerpath_list' %}">
        ğŸ”€ Career Paths
      </a>
    </li>

    <li>
      <a href="{% url 'hr:career_policy_list' %}">
        ğŸ“œ Career Policies
      </a>
    </li>

  </ul>
</div>




<!-- ================= Skills ================= -->
<div class="dropdown dropdown-hover">
  <label
    tabindex="0"
    class="btn btn-ghost btn-sm
           {% if ns == 'skills' %}btn-active font-semibold{% endif %}"
  >
    <svg xmlns="http://www.w3.org/2000/svg"
         class="h-4 w-4 mr-1"
         fill="none"
         viewBox="0 0 24 24"
         stroke="currentColor">
      <path stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.966a1 1 0 00.95.69h4.173c.969 0 1.371 1.24.588 1.81l-3.377 2.455a1 1 0 00-.364 1.118l1.287 3.966c.3.921-.755 1.688-1.54 1.118l-3.377-2.454a1 1 0 00-1.175 0l-3.377 2.454c-.784.57-1.838-.197-1.539-1.118l1.287-3.966a1 1 0 00-.364-1.118L2.98 9.393c-.783-.57-.38-1.81.588-1.81h4.173a1 1 0 00.95-.69l1.286-3.966z" />
    </svg>
    Skills
  </label>

  <ul class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-72 text-sm">

    <!-- ================= Configuration ================= -->
    <li class="menu-title opacity-60">
      <span>âš™ Configuration</span>
    </li>

    <li>
      <a href="{% url 'skills:skilltype_list' %}">
        ğŸ§© Skill Types
      </a>
    </li>

    <li>
      <a href="{% url 'skills:skilllevel_list' %}">
        ğŸ“Š Skill Levels
      </a>
    </li>

    <li>
      <a href="{% url 'skills:resumelinetype_list' %}">
        ğŸ—‚ Resume Line Types
      </a>
    </li>

    <li class="divider my-1"></li>

    <!-- ================= Enablement ================= -->
    <li class="menu-title opacity-60">
      <span>ğŸ¢ Enablement</span>
    </li>

    <li>
      <a href="{% url 'skills:companyskill_list' %}">
        ğŸ”Œ Company Skills
      </a>
    </li>

    <li class="divider my-1"></li>

    <!-- ================= Job Architecture ================= -->
    <li class="menu-title opacity-60">
      <span>ğŸ— Job Architecture</span>
    </li>

    <li>
      <a href="{% url 'skills:jobskill_list' %}">
        ğŸ“ Job Skill Matrix
      </a>
    </li>

    <li class="divider my-1"></li>

    <!-- ================= Master Data ================= -->
    <li class="menu-title opacity-60">
      <span>ğŸ“š Master Data</span>
    </li>

    <li>
      <a href="{% url 'skills:skill_list' %}">
        âœ¨ Skills Catalog
      </a>
    </li>

    <li class="divider my-1"></li>

    <!-- ================= Operations ================= -->
    <li class="menu-title opacity-60">
      <span>âš¡ Operations</span>
    </li>

    <li>
      <a href="{% url 'skills:employeeskill_list' %}">
        ğŸ‘¥ Employee Skills
      </a>
    </li>

    <li>
      <a href="{% url 'skills:resumeline_list' %}">
        ğŸ“„ Resume Lines
      </a>
    </li>

  </ul>
</div>




<!--          {# Performance #}-->
<!--          <div class="dropdown dropdown-hover">-->
<!--            <label tabindex="0"-->
<!--                   class="btn btn-ghost btn-sm-->
<!--                          {% if ns == 'performance' %}btn-active font-semibold{% endif %}">-->
<!--              Performance-->
<!--            </label>-->

<!--            <ul tabindex="0"-->
<!--                class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-64 text-sm">-->

<!--              {# Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ© #}-->
<!--              <li class="menu-title">Operational</li>-->
<!--              <li>-->
<!--                <a href="{% url 'performance:objective_list' %}">-->
<!--                  Objectives-->
<!--                </a>-->
<!--              </li>-->
<!--              <li>-->
<!--                <a href="{% url 'performance:kpi_list' %}">-->
<!--                  KPIs-->
<!--                </a>-->
<!--              </li>-->
<!--              <li>-->
<!--                <a href="{% url 'performance:task_list' %}">-->
<!--                  Tasks-->
<!--                </a>-->
<!--              </li>-->
<!--              <li>-->
<!--                <a href="{% url 'performance:evaluation_list' %}">-->
<!--                  Evaluations-->
<!--                </a>-->
<!--              </li>-->
<!--              <li>-->
<!--                <a href="{% url 'performance:my_evaluation_list' %}">-->
<!--                  My Evaluations-->
<!--                </a>-->
<!--              </li>-->

<!--              <div class="divider my-1"></div>-->

<!--              {# Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª #}-->
<!--              <li class="menu-title">Configuration</li>-->
<!--              <li>-->
<!--                <a href="{% url 'performance:evaluation_type_list' %}">-->
<!--                  Evaluation Types-->
<!--                </a>-->
<!--              </li>-->
<!--              <li>-->
<!--                <a href="{% url 'performance:template_list' %}">-->
<!--                  Templates-->
<!--                </a>-->
<!--              </li>-->
<!--              <li>-->
<!--                <a href="{% url 'performance:parameter_list' %}">-->
<!--                  Parameters-->
<!--                </a>-->
<!--              </li>-->
<!--            </ul>-->
<!--          </div>-->


<!-- Payroll -->
<div class="dropdown dropdown-hover">
  <label
    tabindex="0"
    class="btn btn-ghost btn-sm
           {% if ns == 'payroll' %}btn-active font-semibold{% endif %}"
  >
    <!-- Main icon -->
    <svg xmlns="http://www.w3.org/2000/svg"
         class="h-4 w-4 mr-1"
         fill="none"
         viewBox="0 0 24 24"
         stroke="currentColor">
      <path stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 7h6m-6 4h6m-6 4h6M5 7h.01M5 11h.01M5 15h.01" />
    </svg>
    Payroll
  </label>

  <ul
    tabindex="0"
    class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-72 text-sm"
  >

    <!-- ================= Payroll Operations ================= -->
    <li class="menu-title opacity-60">
      <span class="flex items-center gap-2">
        ğŸ§¾ Payroll Operations
      </span>
    </li>

    <li>
      <a href="{% url 'payroll:payslip_list' %}">
        ğŸ’µ Payslips
      </a>
    </li>

    <li>
      <a href="{% url 'payroll:payslip_input_list' %}">
        ğŸ“ Payslip Inputs
      </a>
    </li>

    <li>
      <a href="{% url 'payroll:period_list' %}">
        ğŸ“… Payroll Periods
      </a>
    </li>

    <li class="divider my-1"></li>

    <!-- ================= Employee Payroll ================= -->
    <li class="menu-title opacity-60">
      <span class="flex items-center gap-2">
        ğŸ‘¤ Employee Payroll
      </span>
    </li>

    <li>
      <a href="{% url 'payroll:employee_salary_list' %}">
        ğŸ’¼ Employee Salaries
      </a>
    </li>

    <li class="divider my-1"></li>

    <!-- ================= Payroll Configuration ================= -->
    <li class="menu-title opacity-60">
      <span class="flex items-center gap-2">
        âš™ï¸ Payroll Configuration
      </span>
    </li>

    <li>
      <a href="{% url 'payroll:structure_list' %}">
        ğŸ—ï¸ Payroll Structures
      </a>
    </li>

    <li>
      <a href="{% url 'payroll:salary_rule_list' %}">
        ğŸ“ Salary Rules
      </a>
    </li>

    <li>
      <a href="{% url 'payroll:rule_category_list' %}">
        ğŸ—‚ï¸ Rule Categories
      </a>
    </li>

    <li>
      <a href="{% url 'payroll:rule_parameter_list' %}">
        ğŸ”¢ Rule Parameters
      </a>
    </li>

    <li>
      <a href="{% url 'payroll:input_type_list' %}">
        âŒ¨ï¸ Input Types
      </a>
    </li>

  </ul>
</div>



        </nav>
        {% endwith %}
      </div>

      {# ÙŠÙ…ÙŠÙ† Ø§Ù„Ù€ Navbar: Ù…Ø¨Ø¯Ù‘Ù„ Ø§Ù„Ø´Ø±ÙƒØ© + Ø§Ù„Ø«ÙŠÙ… + Ø§Ù„Ø­Ø³Ø§Ø¨ #}
      <div class="flex items-center gap-2">

        {# Ù…Ø¨Ø¯Ù‘Ù„ Ø§Ù„Ø´Ø±ÙƒØ© â€“ ÙŠØ¹Ø±Ø¶ Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù†Ø´Ø·Ø© Ø¯Ø§Ø¦Ù…Ø§Ù‹ #}
        {% if allowed_companies %}
        <div class="dropdown dropdown-end">
          <label tabindex="0" class="btn btn-outline btn-xs sm:btn-sm gap-2 max-w-xs">
            <svg xmlns="http://www.w3.org/2000/svg"
                 class="w-4 h-4 sm:w-5 sm:h-5" viewBox="0 0 24 24" fill="currentColor">
              <path d="M3 7h18v2H3zm0 4h12v2H3zm0 4h18v2H3z" />
            </svg>
            <span class="truncate">
              {{ current_company.name|default:allowed_companies.0.name|default:"Company" }}
            </span>
          </label>
          <form method="post"
                action="{% url 'base:company_switch' %}"
                class="dropdown-content mt-1 z-[1] p-3 shadow bg-base-100 rounded-box w-64">
            {% csrf_token %}
            <div class="mb-2 text-xs font-semibold opacity-70">Active Companies</div>
            <ul class="menu menu-sm max-h-56 overflow-y-auto mb-2">
              {% for c in allowed_companies %}
              <li>
                <label class="flex items-center gap-2 cursor-pointer">
                  <input type="checkbox"
                         name="active_companies"
                         value="{{ c.id }}"
                         class="checkbox checkbox-xs"
                         {% if c.id in active_ids %}checked{% endif %}>
                  <span class="truncate">{{ c.name }}</span>
                  {% if c.id == current_company.id %}
                  <span class="badge badge-primary badge-xs ml-1">Current</span>
                  {% endif %}
                </label>
              </li>
              {% endfor %}
            </ul>
            <button type="submit" class="btn btn-primary btn-sm w-full">Apply</button>
          </form>
        </div>
        {% endif %}

        {# Theme toggle â€“ DaisyUI theme #}
        <div class="dropdown dropdown-end">
          <label tabindex="0" class="btn btn-ghost btn-sm">
            Theme
          </label>
            <ul tabindex="0"
              class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52 text-sm">

            <li><a onclick="setTheme('corporate')">Corporate (Default)</a></li>
            <li><a onclick="setTheme('business')">Business</a></li>
            <li><a onclick="setTheme('winter')">Winter</a></li>
            <li><a onclick="setTheme('luxury')">Luxury</a></li>
            <li><a onclick="setTheme('dim')">Dim</a></li>
            <li><a onclick="setTheme('night')">Night</a></li>
            <li><a onclick="setTheme('forest')">Forest</a></li>
            <li><a onclick="setTheme('dracula')">Dracula</a></li>
            <li><a onclick="setTheme('abyss')">Abyss</a></li>
          </ul>
        </div>

        {# Profile / Login #}
        {% if user.is_authenticated %}
        <div class="hidden md:block text-sm text-base-content/70 mr-1">
          Hi, {{ user.name|default:user.email }}
        </div>
        <div class="dropdown dropdown-end">
          <label tabindex="0" class="btn btn-ghost btn-circle avatar">
            <div class="w-9 rounded-full overflow-hidden bg-base-200">
              {% if user.avatar %}
                <img src="{{ user.avatar.url }}" alt="avatar" class="object-cover w-full h-full" />
              {% else %}
                <img src="https://api.dicebear.com/8.x/initials/svg?seed={{ user.name|default:user.email }}"
                     alt="avatar" />
              {% endif %}
            </div>
          </label>
          <ul tabindex="0"
              class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-48">
            <li><a href="{% url 'base:profile' %}">Profile</a></li>
            <li><a href="{% url 'base:edit_profile' %}">Edit profile</a></li>
            <li><a href="{% url 'base:password_change' %}">Change password</a></li>
            <li><a href="{% url 'base:logout' %}" class="text-error">Logout</a></li>
          </ul>
        </div>
        {% else %}
        <a href="{% url 'base:login' %}?next={{ request.path|urlencode }}"
           class="btn btn-primary btn-sm">
          Login
        </a>
        {% endif %}
      </div>
    </div>
  </header>

  {# Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© + Ø§Ù„Ù€ Breadcrumbs + Ø§Ù„Ø¹Ù†ÙˆØ§Ù† #}
  <div class="px-4 sm:px-6 py-0 flex-0">
    {% block breadcrumbs %}
    {% if show_breadcrumbs|default:True %}
    <div class="breadcrumbs text-sm">
      <ul>
<!--        <li><a href="{% url 'base:home' %}">Home</a></li>-->
<!--        <li>{% block page_title %}{% endblock %}</li>-->
      </ul>
    </div>
    {% endif %}
    {% endblock %}


    <div class="mt-2 flex flex-col sm:flex-row sm:items-end sm:justify-between gap-3">
      <div>
        <h1 class="text-2xl sm:text-3xl font-bold leading-tight">
          {% block header_title %}{% block page_title_fallback %}{% endblock %}{% endblock %}
        </h1>
        <p class="mt-1 text-sm text-base-content/70">
          {% block header_subtitle %}{% endblock %}
        </p>
      </div>
        <div class="flex gap-2">
          {% block page_actions %}{% endblock %}
        </div>
    </div>
  </div>

  {# Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ #}
  <main class="flex-1 px-4 sm:px-6 pb-8 w-full">
    {% block content %}{% endblock %}
  </main>

  {# Footer #}
  <footer class="bg-base-100 border-t">
    <div class="px-4 sm:px-6 py-6 flex flex-col sm:flex-row gap-3 sm:items-center sm:justify-between text-sm text-base-content/70">
      <div>Â© {% now "Y" %} 360 Manager â€” All rights reserved.</div>
      <div class="flex flex-wrap items-center gap-3">
        <a class="link link-hover">Privacy</a>
        <span class="opacity-40">â€¢</span>
        <a class="link link-hover">Terms</a>
        <span class="opacity-40">â€¢</span>
        <span class="opacity-70">v{{ APP_VERSION|default:"1.0" }}</span>
      </div>
    </div>
  </footer>

</div>

{# Theme logic + Ø¥Ø²Ø§Ù„Ø© no-transitions Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ #}
<script>
  (function () {
    const html = document.documentElement;
    const sun  = document.getElementById("icon-sun");
    const moon = document.getElementById("icon-moon");

    // Ø§Ù„Ø«ÙŠÙ…Ø§Øª Ø§Ù„ØªÙŠ ØªÙØ¹Ø§Ù…Ù„ ÙƒÙ€ "Ø¯Ø§ÙƒÙ†Ø©" Ù„ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª
    const DARK = new Set(["business", "dark", "forest", "black", "dracula", "cyberpunk"]);

    function getCookie(name) {
      const m = document.cookie.match(new RegExp('(?:^|; )' + name + '=([^;]+)'));
      return m ? decodeURIComponent(m[1]) : null;
    }

    function setCookie(name, value, days) {
      const max = days ? "; max-age=" + (days * 86400) : "";
      document.cookie = name + "=" + encodeURIComponent(value) + "; path=/" + max;
    }

    // Ù†Ø¬Ø¹Ù„Ù‡Ø§ Ø¯Ø§Ù„Ø© Ø¹Ø§Ù…Ø© Ù„ÙŠØ³ØªØ®Ø¯Ù…Ù‡Ø§ Ø§Ù„Ù€ dropdown: onclick="setTheme('emerald')"
    window.setTheme = function (t) {
      html.setAttribute("data-theme", t);
      if (document.body) {
        document.body.setAttribute("data-theme", t);
      }

      localStorage.setItem("theme", t);
      setCookie("theme", t, 365);

      const isDark = DARK.has(t);
      if (sun && moon) {
        sun.classList.toggle("hidden", !isDark);
        moon.classList.toggle("hidden", isDark);
      }
    };

    // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ù…Ø¨Ø¯Ø¦ÙŠ
    const initial =
      getCookie("theme") ||
      localStorage.getItem("theme") ||
      html.getAttribute("data-theme") ||
      "corporate";

    // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ù…Ø¨Ø¯Ø¦ÙŠ ÙÙˆØ±Ø§Ù‹
    window.setTheme(initial);

    // Ø¥Ø²Ø§Ù„Ø© no-transitions Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù€ DOM Ø­ØªÙ‰ Ù„Ø§ ØªØ¸Ù‡Ø± ØªØºÙŠÙ‘Ø±Ø§Øª Ù…ÙØ§Ø¬Ø¦Ø©
    window.addEventListener("DOMContentLoaded", function () {
      html.classList.remove("no-transitions");
    });
  })();
</script>

{% block extra_scripts %}{% endblock %}
</body>
</html>
