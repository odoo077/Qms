{% extends "base.html" %}

{% block title %}
  {% if object %}Edit Asset{% else %}Create Asset{% endif %}
{% endblock %}

{% block content %}
<div class="w-full px-6 py-6 space-y-6">

  <!-- ===================================================== -->
  <!-- PAGE HEADER -->
  <!-- ===================================================== -->
  <section class="flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
    <div>
      <h1 class="text-3xl font-bold tracking-tight">
        {% if object %}Edit Asset{% else %}Create Asset{% endif %}
      </h1>
      <p class="text-sm text-base-content/60">
        Asset identity, classification, lifecycle, and purchase details
      </p>
    </div>

    <div class="flex gap-2">
      <a href="{% url 'assets:asset_list' %}"
         class="btn btn-ghost btn-sm">
        Back
      </a>
    </div>
  </section>

  <!-- ===================================================== -->
  <!-- FORM CARD -->
  <!-- ===================================================== -->
  <section class="card bg-base-100 border border-base-200 shadow-sm">
    <form method="post"
          enctype="multipart/form-data"
          class="p-6 space-y-8">

      {% csrf_token %}

      {% if form.non_field_errors %}
        <div class="alert alert-error text-sm">
          {{ form.non_field_errors }}
        </div>
      {% endif %}

      {% for hidden in form.hidden_fields %}
        {{ hidden }}
      {% endfor %}

      <!-- ================================================= -->
      <!-- ASSET IDENTITY -->
      <!-- ================================================= -->
      <div class="space-y-4">
        <h2 class="text-base font-semibold tracking-wide">
            Asset Identity
          </h2>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

          <div class="form-control w-full">
            <label class="label p-0 mb-1">
              <span class="label-text text-sm font-medium">{{ form.name.label }}</span>
            </label>
            {{ form.name }}
            {% for e in form.name.errors %}
              <p class="text-error text-xs mt-1">{{ e }}</p>
            {% endfor %}
          </div>

          <div class="form-control w-full">
            <label class="label p-0 mb-1">
              <span class="label-text text-sm font-medium">{{ form.code.label }}</span>
            </label>
            {{ form.code }}
            {% for e in form.code.errors %}
              <p class="text-error text-xs mt-1">{{ e }}</p>
            {% endfor %}
          </div>

          <div class="form-control w-full">
            <label class="label p-0 mb-1">
              <span class="label-text text-sm font-medium">{{ form.serial.label }}</span>
            </label>
            {{ form.serial }}
            {% for e in form.serial.errors %}
              <p class="text-error text-xs mt-1">{{ e }}</p>
            {% endfor %}
          </div>

        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="form-control w-full">
            <label class="label p-0 mb-1">
              <span class="label-text text-sm font-medium">{{ form.company.label }}</span>
            </label>
            {{ form.company }}
            {% for e in form.company.errors %}
              <p class="text-error text-xs mt-1">{{ e }}</p>
            {% endfor %}
          </div>
        </div>
      </div>


      <!-- ================================================= -->
      <!-- CLASSIFICATION -->
      <!-- ================================================= -->
      <div class="space-y-4">
        <h2 class="text-base font-semibold tracking-wide">
          Classification
        </h2>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

          <div class="form-control w-full">
            <label class="label p-0 mb-1">
              <span class="label-text text-sm font-medium">{{ form.category.label }}</span>
            </label>
            {{ form.category }}
          </div>

          <div class="form-control w-full">
            <label class="label p-0 mb-1">
              <span class="label-text text-sm font-medium">{{ form.department.label }}</span>
            </label>
            {{ form.department }}
          </div>

          <div class="form-control w-full">
            <label class="label p-0 mb-1">
              <span class="label-text text-sm font-medium">{{ form.parent.label }}</span>
            </label>
            {{ form.parent }}
          </div>

        </div>
      </div>


      <!-- ================================================= -->
      <!-- LIFECYCLE -->
      <!-- ================================================= -->
      <div class="space-y-4">
        <h2 class="text-base font-semibold tracking-wide">
          Lifecycle & Assignment
        </h2>

        <div class="alert alert-info text-sm">
          Status and assignment are controlled by workflow rules.
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

          <div class="form-control w-full">
            <label class="label p-0 mb-1">
              <span class="label-text text-sm font-medium">{{ form.status.label }}</span>
            </label>
            {{ form.status }}
          </div>

          <div class="form-control w-full">
            <label class="label p-0 mb-1">
              <span class="label-text text-sm font-medium">{{ form.holder.label }}</span>
            </label>
            {{ form.holder }}
          </div>

          <div class="flex items-center gap-3 pt-8">
            {{ form.active }}
            <span class="text-sm">{{ form.active.label }}</span>
          </div>

        </div>
      </div>


      <!-- ================================================= -->
      <!-- PURCHASE -->
      <!-- ================================================= -->
      <div class="space-y-4">
      <h2 class="text-base font-semibold tracking-wide">
        Purchase Information
      </h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

        <div class="form-control w-full">
          <label class="label p-0 mb-1">
            <span class="label-text text-sm font-medium">{{ form.purchase_date.label }}</span>
          </label>
          {{ form.purchase_date }}
        </div>

        <div class="form-control w-full">
          <label class="label p-0 mb-1">
            <span class="label-text text-sm font-medium">{{ form.purchase_value.label }}</span>
          </label>
          {{ form.purchase_value }}
        </div>

      </div>

      <div class="form-control w-full">
        <label class="label p-0 mb-1">
          <span class="label-text text-sm font-medium">{{ form.note.label }}</span>
        </label>
        {{ form.note }}
      </div>
    </div>


      <!-- ================================================= -->
      <!-- ACTIONS -->
      <!-- ================================================= -->
      <div class="flex justify-end gap-2 pt-6 border-t border-base-200">
        <a href="{% url 'assets:asset_list' %}"
           class="btn btn-ghost btn-sm">
          Cancel
        </a>
        <button type="submit"
                class="btn btn-primary btn-sm">
          {% if object %}Save Changes{% else %}Create Asset{% endif %}
        </button>
      </div>

    </form>
  </section>

</div>
{% endblock %}
